import{_ as C,o as c,c as d,d as t,F as _,f as g,g as x,t as n,b as v,h as f,v as $}from"./index-07b64064.js";const{VITE_APP_URL:h,VITE_APP_PATH:u}={VITE_APP_URL:"https://vue3-course-api.hexschool.io",VITE_APP_PATH:"kurokawa2023",BASE_URL:"/2023-vue-vite/",MODE:"production",DEV:!1,PROD:!0},b={data(){return{cartList:[]}},methods:{getCarList(){const s=this.$loading.show({loader:"dots",color:"#fe0697"});this.$http(`${h}/v2/api/${u}/cart`).then(a=>{this.cartList=a.data.data,s.hide()})},delCart(s){const a=this.$loading.show({loader:"dots",color:"#fe0697"});this.$http.delete(`${h}/v2/api/${u}/cart/${s}`).then(o=>{alert(`${o.data.message}`),a.hide(),this.getCarList()}).catch(o=>{console.log(o)})},editCart(s){const a={product_id:s.product.id,qty:s.qty};this.$http.put(`${h}/v2/api/${u}/cart/${s.id}`,{data:a}).then(o=>{alert(`${o.data.message}`),this.getCarList()}).catch(o=>{console.log(o)})},delCartAll(){this.$http.delete(`${h}/v2/api/${u}/carts`).then(s=>{alert(`${s.data.message}`),this.getCarList()}).catch(s=>{console.log(s)})}},mounted(){this.getCarList()}},L=t("div",{class:"text-center"},[t("h2",null,"購物車")],-1),m={key:0,class:"mt-3 mb-3"},y={key:1,class:"text-end"},k={class:"table align-middle"},P=t("thead",null,[t("tr",null,[t("th"),t("th",null,"品名"),t("th",{style:{width:"150px"}},"數量/單位"),t("th",null,"單價")])],-1),V=["onClick"],A=t("i",{class:"fas fa-spinner fa-pulse"},null,-1),E={class:"input-group input-group-sm"},T={class:"input-group mb-1 mt-1"},q=["onUpdate:modelValue","onChange"],w=["value"],D={class:"input-group-text",id:"basic-addon2"},U={class:"text-start"},B={class:"me-5"},I=t("small",{class:"text-success"},"折扣價：",-1),R=t("td",{colspan:"3",class:"text-end"},"總計",-1),N={class:"text-end"},S=t("td",{colspan:"3",class:"text-end text-success"},"折扣價",-1),F={class:"text-end text-success"};function H(s,a,o,M,r,i){var p;return c(),d(_,null,[L,((p=r.cartList.carts)==null?void 0:p.length)===0?(c(),d("div",m,"目前購物車尚無有商品，快進行選購吧")):(c(),d("div",y,[t("button",{class:"btn btn-outline-danger",type:"button",onClick:a[0]||(a[0]=(...e)=>i.delCartAll&&i.delCartAll(...e))},"清空購物車")])),t("table",k,[P,t("tbody",null,[r.cartList.carts?(c(!0),d(_,{key:0},g(r.cartList.carts,e=>(c(),d("tr",{key:e.id},[t("td",null,[t("button",{type:"button",class:"btn btn-outline-danger btn-sm",onClick:l=>i.delCart(e.id)},[A,v(" x ")],8,V)]),t("td",null,n(e.product.title),1),t("td",null,[t("div",E,[t("div",T,[f(t("select",{class:"form-select","onUpdate:modelValue":l=>e.qty=l,onChange:l=>i.editCart(e)},[(c(),d(_,null,g(30,l=>t("option",{key:`${l}qq`,value:l},n(l),9,w)),64))],40,q),[[$,e.qty]]),t("span",D,n(e.product.unit),1)])])]),t("td",U,[t("span",B,n(e.product.price)+"元",1),I,v(" "+n(e.final_total)+"元 ",1)])]))),128)):x("",!0)]),t("tfoot",null,[t("tr",null,[R,t("td",N,n(r.cartList.total)+"元",1)]),t("tr",null,[S,t("td",F,n(r.cartList.final_total)+"元",1)])])])],64)}const j=C(b,[["render",H]]);export{j as default};
